<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Личный кабинет</title>
    <link rel="stylesheet" href="static/css/profile_edit.css">
    <link rel="stylesheet" href="static/css/_base.css">
    <link rel="stylesheet" href="static/css/_base-shop.css">


    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

</head>

<body>

    <header class="site-header">
        <div class="burger-menu">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <line x1="0" y1="6" x2="25" y2="6" stroke="black" stroke-width="2" />
                <line x1="0" y1="13" x2="15" y2="13" stroke="black" stroke-width="2" />
                <line x1="0" y1="20" x2="25" y2="20" stroke="black" stroke-width="2" />
            </svg>
        </div>

        <!-- OFFCANVAS MENU -->
        <div class="offcanvas" id="offcanvas" aria-hidden="true">
            <div class="offcanvas-panel" role="dialog" aria-modal="true" aria-label="Меню">
                <div class="offcanvas-top">
                    <button class="off-close" aria-label="Закрыть">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <line x1="0" y1="6" x2="25" y2="6" stroke="black" stroke-width="2" />
                            <line x1="0" y1="13" x2="25" y2="13" stroke="black" stroke-width="2" />
                            <line x1="0" y1="20" x2="25" y2="20" stroke="black" stroke-width="2" />
                        </svg>
                    </button>
                    <a href="#" class="off-lang">ENG</a>
                </div>

                <nav class="off-nav">
                    <a href="#" data-sub="shop">МАГАЗИН</a>
                    <a href="#" data-sub="collections">КОЛЛЕКЦИИ</a>
                    <a href="#" data-sub="delivery">ДОСТАВКА И ОПЛАТА</a>
                    <a href="#" data-sub="returns">ВОЗВРАТ И ОБМЕН</a>
                    <a href="#" data-sub="contacts">КОНТАКТЫ</a>
                    <a href="#" data-sub="blog">БЛОГ</a>
                    <a href="#" data-sub="social">НАШИ СОЦСЕТИ</a>
                    <a href="#" data-sub="about">О НАС</a>
                </nav>

                <div class="off-icons">
                    <img src="static/icons/search.svg" alt="Поиск">
                    <img src="static/icons/bookmark-header.svg" alt="Избранное">
                    <img src="static/icons/bag.svg" alt="Корзина">
                    <img src="static/icons/user.svg" alt="Профиль">
                </div>

                <div class="off-watermark">
                    <img src="static/images/logo_overlay_black.png" alt="">
                </div>

            </div>

            <!-- Субпанель справа -->
            <div class="off-sub" id="offSub" aria-hidden="true">
                <div class="off-sub-head">
                    <button class="off-sub-back" type="button" aria-label="Назад">
                        <img src="static/icons/arrow.svg" alt="">
                    </button>
                    <div class="off-sub-title" id="offSubTitle"></div>
                </div>
                <div class="off-sub-body" id="offSubBody"></div>
            </div>

            <!-- Шаблоны наполняемого контента -->
            <template id="tpl-shop">
                <div class="off-sub-grid">
                    <ul class="off-sub-list">
                        <li><a href="#">ФУТБОЛКИ</a></li>
                        <li><a href="#">ЛОНГСЛИВЫ</a></li>
                        <li><a href="#">КОМПЛЕКТ СПОРТИВНЫЙ</a></li>
                        <li><a href="#">ТОЛСТОВКИ (ХУДИ)</a></li>
                        <li><a href="#">БРЮКИ</a></li>
                    </ul>
                    <a class="off-sub-all" href="#">СМОТРЕТЬ ВСЕ</a>
                </div>
            </template>

            <template id="tpl-delivery">
                <div class="off-sub-text">
                    <p>Доставка по РФ: курьером и в пункты выдачи. Оплата: картой онлайн/при получении.</p>
                    <a class="off-sub-all" href="#">Подробнее</a>
                </div>
            </template>

            <script>
                (() => {
                    const offcanvas = document.getElementById('offcanvas');
                    const closeBtn = offcanvas.querySelector('.off-close');

                    const sub = document.getElementById('offSub');
                    const subBody = document.getElementById('offSubBody');
                    const subTitle = document.getElementById('offSubTitle');

                    function openSub(key, title) {
                        const tpl = document.getElementById('tpl-' + key);
                        subBody.innerHTML = tpl ? tpl.innerHTML :
                            '<div class="off-sub-text"><p>Скоро тут будет контент.</p></div>';
                        subTitle.textContent = title || '';
                        sub.classList.add('open');
                    }
                    function closeSub() { sub.classList.remove('open'); }

                    offcanvas.querySelectorAll('.off-nav a[data-sub]').forEach(a => {
                        a.addEventListener('click', e => {
                            e.preventDefault();
                            openSub(a.dataset.sub, a.textContent.trim());
                        });
                    });

                    offcanvas.querySelector('.off-sub-back')?.addEventListener('click', closeSub);
                    closeBtn?.addEventListener('click', closeSub);
                    offcanvas.addEventListener('click', (e) => { if (e.target === offcanvas) closeSub(); });
                })();
            </script>


        </div>


        <script>
            const burger = document.querySelector('.burger-menu');
            const panel = document.getElementById('offcanvas');
            const closeBtn = document.querySelector('.off-close');

            function openMenu() {
                panel.classList.add('open');
                document.getElementById('offSub')?.classList.remove('open'); // сброс субпанели
                document.body.style.overflow = 'hidden';
            }
            function closeMenu() {
                panel.classList.remove('open');
                document.getElementById('offSub')?.classList.remove('open'); // на всякий
                document.body.style.overflow = '';
            }

            burger?.addEventListener('click', openMenu);
            closeBtn?.addEventListener('click', closeMenu);
            panel?.addEventListener('click', (e) => { if (e.target === panel) closeMenu(); });
            document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMenu(); });
        </script>





        <div class="logo">
            <img src="static/images/GY_header_logo_black.svg" alt="Gabriel Yusubov" class="logo-img">
        </div>

        <div class="lang-switch" id="langSwitch">
            <a href="">ENG</a>
        </div>
    </header>


    <div class="status-bar" role="navigation" aria-label="Статус-бар">
        <div class="sb-inner">
            <img class="sb-logo" src="static/images/GY.svg" alt="GY">
            <span class="sb-dot" aria-hidden="true"></span>
            <a class="sb-link" href="/shop/">ЛИЧНЫЙ КАБИНЕТ</a>
            <span class="sb-dot" aria-hidden="true"></span>
            <a class="sb-link" href="/shop/">ПРОФИЛЬ</a>
        </div>
    </div>

    <main>

        <div class="lk-section-name">
            <div class="left-side">
                <img src="static/icons/user.svg" alt="">
                <p>ПРОФИЛЬ</p>
            </div>

            <div class="right-side">
                <button class="profile-close" type="button" aria-label="Закрыть">×</button>
            </div>
        </div>


        <section class="profile">

            <form class="profile-form" action="#" method="post" novalidate>
                <label class="pf-row">
                    <span class="pf-label">ФИО:</span>
                    <input class="pf-field" name="fio" type="text" autocomplete="name" spellcheck="false"
                        placeholder="ИВАН ИВАНОВИЧ ИВАНОВ">
                </label>

                <label class="pf-row">
                    <span class="pf-label">Email:</span>
                    <input class="pf-field" name="email" type="email" autocomplete="email" placeholder="MAIL@MAIL.RU">
                </label>

                <label class="pf-row">
                    <span class="pf-label">Телефон:</span>
                    <input class="pf-field" name="phone" type="tel" inputmode="tel" autocomplete="tel"
                        placeholder="+7 XXX XXX XX XX" maxlength="18">
                </label>

                <label class="pf-row">
                    <span class="pf-label">Постоянный адрес доставки:</span>
                    <textarea class="pf-field pf-area" name="address" rows="3" placeholder="Г. МОСКВА, …"></textarea>
                </label>

                <label class="pf-row">
                    <span class="pf-label">Карта:</span>
                    <input class="pf-field" name="card" type="text" inputmode="numeric" autocomplete="cc-number"
                        maxlength="19" placeholder="XXXX XXXX XXXX XXXX">
                </label>

                <button class="pf-submit" type="submit">СОХРАНИТЬ ИЗМЕНЕНИЯ</button>
            </form>
        </section>



        <script>
            (() => {
                const f = document.querySelector('.profile-form');
                const fio = f.querySelector('input[name="fio"]');
                const email = f.querySelector('input[name="email"]');
                const card = f.querySelector('input[name="card"]');

                // Имя: только буквы (RU/EN), пробел и дефис
                fio.addEventListener('input', () => {
                    const clean = fio.value.replace(/[^A-Za-zА-Яа-яЁё \-]/g, '');
                    if (clean !== fio.value) fio.value = clean;
                    fio.classList.toggle('is-error', !!fio.value && !/^[A-Za-zА-Яа-яЁё \-]+$/.test(fio.value));
                });

                // Карта: только цифры + группировка по 4
                card.addEventListener('input', () => {
                    const digits = card.value.replace(/\D/g, '').slice(0, 16);
                    const parts = digits.match(/.{1,4}/g) || [];
                    card.value = parts.join(' ');
                    card.classList.toggle('is-error', digits.length && digits.length < 16);
                });

                // Email: подсветка красным, если невалиден
                const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
                function checkEmail() {
                    const v = email.value.trim();
                    email.classList.toggle('is-error', v.length && !emailRe.test(v));
                }
                email.addEventListener('input', checkEmail);
                email.addEventListener('blur', checkEmail);

                // Пересчёт высоты, если поля растянулись
                window.addEventListener('resize', () => {
                    document.querySelectorAll('.acc.open .acc-panel').forEach(p => p.style.maxHeight = p.scrollHeight + 'px');
                });

                // Финальная проверка перед отправкой
                f.addEventListener('submit', (e) => {
                    const okFio = fio.value.trim().length && /^[A-Za-zА-Яа-яЁё \-]+$/.test(fio.value);
                    const okMail = email.value.trim().length && emailRe.test(email.value.trim());
                    const okCard = card.value.replace(/\D/g, '').length === 16;

                    if (!okFio) fio.classList.add('is-error');
                    if (!okMail) email.classList.add('is-error');
                    if (!okCard) card.classList.add('is-error');

                    if (!okFio || !okMail || !okCard) e.preventDefault();
                });

                const phone = f.querySelector('input[name="phone"]');

                phone.addEventListener('input', () => {
                    let d = phone.value.replace(/\D/g, '');      // оставляем только цифры
                    if (d.startsWith('8')) d = '7' + d.slice(1); // приводим 8 к 7
                    if (d && !d.startsWith('7')) d = '7' + d;    // всегда начинаем с 7
                    d = d.slice(0, 11);                           // максимум 11 цифр (+7 и ещё 10)

                    const rest = d.replace(/^7/, '');
                    let v = '+7';
                    if (rest.length > 0) v += ' ' + rest.slice(0, 3);
                    if (rest.length > 3) v += ' ' + rest.slice(3, 6);
                    if (rest.length > 6) v += ' ' + rest.slice(6, 8);
                    if (rest.length > 8) v += ' ' + rest.slice(8, 10);
                    phone.value = v;
                });
            })();
        </script>


    </main>


    <footer class="site-footer">

        <div class="footer-blocks">
            <div class="footer-block-customer">
                <h2>Покупателю:</h2>

                <div class="customer-links">
                    <a href="">Магазин</a>
                    <a href="">Избранное</a>
                    <a href="">Корзина</a>
                    <a href="">Личный кабинет</a>
                    <a href="">Возвраат и обмен</a>
                    <a href="">Доставка и оплата</a>
                    <a href="">Публичная оферта</a>
                    <a href="">Политиа конфиденциальности</a>
                </div>

                <div class="footer-cp-name">
                    <p>© 2025 Gabriel Yusubov </p>
                </div>
            </div>

            <div class="footer-block-about">
                <h2>О нас:</h2>

                <div class="about-links">
                    <a href="">Контакты</a>
                    <a href="">Блог</a>
                </div>
            </div>
        </div>



        <div class="footer-socials">
            <ul class="socials-list">
                <li>
                    <a class="social" href="https://instagram.com/username" target="_blank" rel="noopener nofollow"
                        aria-label="Instagram">
                        <img src="static/icons/instagram.svg" alt="">
                    </a>
                </li>
                <li>
                    <a class="social" href="https://vk.com/username" target="_blank" rel="noopener nofollow"
                        aria-label="VK">
                        <img src="static/icons/vk.svg" alt="">
                    </a>
                </li>
                <li>
                    <a class="social" href="https://t.me/username" target="_blank" rel="noopener nofollow"
                        aria-label="Telegram">
                        <img src="static/icons/telegram.svg" alt="">
                    </a>
                </li>
                <li>
                    <a class="social" href="https://www.tiktok.com/@username" target="_blank" rel="noopener nofollow"
                        aria-label="TikTok">
                        <img src="static/icons/tiktok.svg" alt="">
                    </a>
                </li>
                <li>
                    <a class="social" href="https://youtube.com/@username" target="_blank" rel="noopener nofollow"
                        aria-label="YouTube">
                        <img src="static/icons/youtube.svg" alt="">
                    </a>
                </li>
            </ul>

            <p class="socials-note">*проект Meta Platforms Inc., запрещена в РФ</p>
        </div>




        <div class="logo-overlay-footer">
            <img src="static/images/logo_overlay.svg" alt="">
        </div>
    </footer>


</body>

</html>